codetasty.revision.2.0
{"ts":1526930862,"restoring":false,"user_id":7359,"patch":[{"diffs":[[1,"<?php\r\nif(!isset($_SESSION)){\r\n\tsession_start();\r\n}\r\nif(!isset($_SESSION['username'])){\r\n\theader(\"location: /db/login.php\");\r\n}\r\n?>\r\n<?php $thisPage=\"notes\"; ?>\r\n\r\n<!DOCTYPE html>\r\n\r\n<html lang=\"en\">\r\n\r\n   <head>\r\n\r\n      <title>Cedar High School</title>\r\n\r\n      <?php include(\"../assets/inc/headtag.php\");\r\n      $manage->require_perm(\"banners\");\r\n       ?>\r\n      <style>\r\n         .imglabel {\r\n         \tfont-size: 12px;\r\n         }\r\n\r\n         @media (min-width: 768px) and (max-width: 979px) {\r\n\t         .imglabel {\r\n\t         \tfont-size: 40px;\r\n\t         }\r\n         }\r\n\r\n      </style>\r\n\r\n   </head>\r\n\r\n   <body>\r\n\r\n      <?php include(\"../assets/inc/navbar.php\") ?>\r\n\r\n\r\n      <style type=\"text/css\">\r\n      a.thumbnail { height: 205px; }\r\n      </style>\r\n\r\n      <!-- Let the container begin! -->\r\n\r\n      <div class=\"container\">\r\n\r\n      <div class=\"row\">\r\n\r\n\r\n\r\n      <?php include(\"../assets/inc/navlist.php\") ?>\r\n\t\t\t<?php mustLogIn(); ?>\r\n      <div class=\"span9\">\r\n         <div class=\"well\">\r\n            <h1><i class=\"fa fa-picture-o\"></i> Banners</h1>\r\n         </div>\r\n      </div>\r\n\r\n\t\t\t<div class=\"span9\">\r\n\t\t\t\t<div class=\"well\">\r\n\t\t\t\t\t<?php\r\n\t\t\t\t\t$target_dir = \"../assets/img/Banner/\";\r\n\t\t\t\t\t$target_file = $target_dir . basename($_FILES[\"fileToUpload\"][\"name\"]);\r\n\t\t\t\t\t$uploadOk = 1;\r\n\t\t\t\t\t$imageFileType = pathinfo($target_file,PATHINFO_EXTENSION);\r\n\t\t\t\t\t// Check if image file is a actual image or fake image\r\n\t\t\t\t\tif(isset($_POST[\"send\"])) {\r\n\t\t\t\t\t\t$num = $_POST['number'];\r\n\t\t\t\t\t\t// Allow certain image size\r\n\t\t\t\t\t\tlist($width, $height) = getimagesize($_FILES[\"fileToUpload\"][\"tmp_name\"]);\r\n\t\t\t\t\t\tif($width != 875 || $height != 300 && $imageFileType != \"gif\") {\r\n\t\t\t\t\t\t    echo \"Please upload a banner image. This file doesn't look right.<br>\";\r\n\t\t\t\t\t\t    $uploadOk = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Allow certain file formats\r\n\t\t\t\t\t\tif($imageFileType != \"jpg\" && $imageFileType != \"png\" && $imageFileType != \"gif\" ) {\r\n\t\t\t\t\t\t    echo \"Sorry, only JPG, PNG & GIF files are allowed.<br>\";\r\n\t\t\t\t\t\t    $uploadOk = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Check if $uploadOk is set to 0 by an error\r\n\t\t\t\t\t\tif ($uploadOk == 0) {\r\n\t\t\t\t\t\t    echo \"Sorry, your file was not uploaded.<br>\";\r\n\t\t\t\t\t\t// if everything is ok, try to upload file\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif(file_exists($target_dir.$num.\".gif\")) {\r\n\t\t\t\t\t\t\t\tunlink($target_dir.$num.\".gif\");\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tif(file_exists($target_dir.$num.\".png\")) {\r\n\t\t\t\t\t\t\t\t\tunlink($target_dir.$num.\".png\");\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tif(file_exists($target_dir.$num.\".jpg\")) {\r\n\t\t\t\t\t\t\t\t\t\tunlink($target_dir.$num.\".jpg\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t    if (move_uploaded_file($_FILES[\"fileToUpload\"][\"tmp_name\"], $target_dir.$num.\".\".$imageFileType)) {\r\n\t\t\t\t\t\t        echo \"The file \".$num.\".\".$imageFileType.\" has been uploaded.<br>\";\r\n\t\t\t\t\t\t    } else {\r\n\t\t\t\t\t\t        echo \"Sorry, there was an error uploading your file.<br>\";\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t?>\r\n\t\t\t\t\t<script>\r\n\t\t\t\t\t\t$(function() {\r\n\t\t\t\t\t\t\t$(\"#number\").on(\"change\",function() {\r\n\t\t\t\t\t\t\t\t$(\"#replacing\").attr(\"src\",$(\"#\"+$(this).val()).attr(\"src\"));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$(\"#replacing\").attr(\"src\",$(\"#\"+$(\"#number\").val()).attr(\"src\"));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t</script>\r\n\t\t\t\t\t<form action=\"\" method=\"post\" enctype=\"multipart/form-data\">\r\n\t\t\t\t\t<img src=\"#\" class=\"pull-right\" id=\"replacing\" style=\"max-width: 30%;\">\r\n\t\t\t\t\t\t<select name=\"number\" id=\"number\" class=\"form-control\">\r\n\t\t\t\t\t\t\t<option>1</option>\r\n\t\t\t\t\t\t\t<option>2</option>\r\n\t\t\t\t\t\t\t<option>3</option>\r\n\t\t\t\t\t\t\t<option>4</option>\r\n\t\t\t\t\t\t\t<option>5</option>\r\n\t\t\t\t\t\t\t<option>6</option>\r\n\t\t\t\t\t\t</select><br>\r\n\t\t\t\t\t\t<input name=\"fileToUpload\" id=\"fileToUpload\" type=\"file\" /><br />\r\n\t\t\t\t\t\t<input name=\"send\" hidden style=\"display:none;\">\r\n\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-default\">Upload</button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<hr>\r\n\t\t\t\t\t<h3>Current Banners</h3><br>\r\n\t\t\t\t\t<?php\r\n\t\t\t\t\t$files1 = scandir($target_dir);\r\n\t\t\t\t\t$num = 0;\r\n\t\t\t\t\t$ignore = array(\".\",\"..\",\".DS_Store\",\".htaccess\",\"uploads\");\r\n\t\t\t\t\tforeach($files1 as $file) {\r\n\t\t\t\t\t\tif(in_array($file, $ignore)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$num += 1;\r\n\t\t\t\t\t\techo \"<div style='border:1px solid black; margin-bottom:2px;'>\".$file.\"<br><img id='$num' src='/assets/img/Banner/$file' style='max-height:100px;'><br></div>\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\t?>\r\n\t\t\t\t</div><!--well-->\r\n\r\n\t\t\t</div><!--span3-->\r\n      <style>\r\n         .styled-table {\r\n            font-size: 110%;\r\n         }\r\n         tr td:nth-child(1) {\r\n            font-weight: bold;\r\n         }\r\n      </style>\r\n      <?php include(\"assets/inc/footer.php\") ?>\r\n\t\t\t<script src=\"//chs.ironk12.org/assets/js/jquery.js\"></script>\r\n\r\n\t\t\t<script src=\"//chs.ironk12.org/assets/js/bootstrap.js\"></script>\r\n   </body>\r\n\r\n</html>\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":4725}],"length":4725}
{"ts":1526930905,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0," 300"],[-1," && $imageFileType != \"gif\""],[0,") {\r"]],"start1":1655,"start2":1655,"length1":35,"length2":8}],"length":4698}
{"ts":1526930908,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"\"]);\r\n\t\t\t\t\t\t"],[1,"// "],[0,"if($width !="]],"start1":1613,"start2":1613,"length1":24,"length2":27},{"diffs":[[0,"= 300) {\r\n\t\t\t\t\t\t"],[1,"// "],[0,"    echo \"Please"]],"start1":1657,"start2":1657,"length1":32,"length2":35},{"diffs":[[0,"t.<br>\";\r\n\t\t\t\t\t\t"],[1,"// "],[0,"    $uploadOk = "]],"start1":1743,"start2":1743,"length1":32,"length2":35},{"diffs":[[0,"dOk = 0;\r\n\t\t\t\t\t\t"],[1,"// "],[0,"}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t"]],"start1":1772,"start2":1772,"length1":32,"length2":35}],"length":4710}
{"ts":1526930928,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"\r\n\t\t\t\t\t\t"],[-1,"// "],[0,"if($widt"]],"start1":1617,"start2":1617,"length1":19,"length2":16},{"diffs":[[0,"0) {\r\n\t\t\t\t\t\t"],[-1,"// "],[0,"    echo \"Pl"]],"start1":1658,"start2":1658,"length1":27,"length2":24},{"diffs":[[0,"\r\n\t\t\t\t\t\t"],[-1,"// "],[0,"    $upl"]],"start1":1745,"start2":1745,"length1":19,"length2":16},{"diffs":[[0,"\r\n\t\t\t\t\t\t"],[-1,"// "],[0,"}\r\n\t\t\t\t\t"]],"start1":1771,"start2":1771,"length1":19,"length2":16}],"length":4698}