codetasty.revision.2.0
{"ts":1534281738,"restoring":false,"user_id":7359,"patch":[{"diffs":[[1,"<?php $thisPage = \"directory\"; ?>\n\n\t<!DOCTYPE html>\n\n\t<html lang=\"en\">\n\n\t<head>\n\n\t\t<title>Cedar High School</title>\n\n\t\t<?php include \"../assets/inc/headtag.php\";\n\t\t$manage->require_perm(\"edit\");?>\n\n\t</head>\n\n\t<body>\n\n\t\t<?php include \"../assets/inc/navbar.php\" ?>\n\n\n\n\t\t\t<!-- Let the container begin! -->\n\n\t\t\t<div class=\"container\">\n\t\t\t<form action=\"\" method=\"post\">\n\t\t\t\t<div class=\"row\">\n\n\t\t\t\t<?php include \"../assets/inc/navlist.php\";\n\t\t\t\t$mysqli = new mysqli(\"localhost\", \"chscyberweb\", $pwwd, \"chs\");\n\t\t\t\t\n\t\t\t\tif(isset($_POST['fname']) && isset($_GET['id'])){\n\t\t\t\t\t$fname = $_POST['fname'];\n\t\t\t\t\t$lname = $_POST['lname'];\n\t\t\t\t\t$picture = $_POST['picture'];\n\t\t\t\t\t$website = $_POST['website'];\n\t\t\t\t\t$a1 = $_POST['a1'];\n\t\t\t\t\t$b1 = $_POST['b1'];\n\t\t\t\t\t$a2 = $_POST['a2'];\n\t\t\t\t\t$b2 = $_POST['b2'];\n\t\t\t\t\t$a3 = $_POST['a3'];\n\t\t\t\t\t$b3 = $_POST['b3'];\n\t\t\t\t\t$a4 = $_POST['a4'];\n\t\t\t\t\t$b4 = $_POST['b4'];\n\t\t\t\t\t$a1u = $_POST['a1u'];\n\t\t\t\t\t$b1u = $_POST['b1u'];\n\t\t\t\t\t$a2u = $_POST['a2u'];\n\t\t\t\t\t$b2u = $_POST['b2u'];\n\t\t\t\t\t$a3u = $_POST['a3u'];\n\t\t\t\t\t$b3u = $_POST['b3u'];\n\t\t\t\t\t$a4u = $_POST['a4u'];\n\t\t\t\t\t$b4u = $_POST['b4u'];\n\t\t\t\t\t$education = $_POST['education'];\n\t\t\t\t\t$email = $_POST['email'];\n\t\t\t\t\t$room = $_POST['room'];\n\t\t\t\t\t$extras = $_POST['extras'];\n\t\t\t\t\t\n\t\t\t\t\t$query = $mysqli->prepare(\"UPDATE `faculty` SET `fname`=?,`lname`=?,`picture`=?,`website`=?,`a1`=?,`b1`=?,`a2`=?,`b2`=?,`a3`=?,`b3`=?,`a4`=?,`b4`=?,`a1u`=?,`b1u`=?,`a2u`=?,`b2u`=?,`a3u`=?,`b3u`=?,`a4u`=?,`b4u`=?,`education`=?,`email`=?,`room`=?,`extras`=? WHERE `id`=?\");\n\t\t\t\t\t$query->bind_param(\"ssssssssssssssssssssssssi\",$fname,$lname,$picture,$website,$a1,$b1,$a2,$b2,$a3,$b3,$a4,$b4,$a1u,$b1u,$a2u,$b2u,$a3u,$b3u,$a4u,$b4u,$education,$email,$room,$extras,$_GET['id']);\n\t\t\t\t\t$query->execute();\n\t\t\t\t\t$manage->activity(\"Updated faculty\", \"fac\", $_GET['id']);\n\t\t\t\t\techo \"<span class=\\\"span9\\\"><div class=\\\"well\\\">Saved</div></span>\";\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ($mysqli->error) {\n\t\t\t\t\tdie($mysqli->error);\n\t\t\t\t}\n\n\t\t\t\tif (isset($_GET['id'])) {\n\t\t\t\t\t$person = $mysqli->query(\"SELECT * FROM `faculty` WHERE `id`=\" . $_GET['id']);\n\t\t\t\t\t$person = $person->fetch_array();\n\t\t\t\t} else {\n\t\t\t\t\tdie(\"<span class=\\\"span9\\\"><div class=\\\"well\\\">This person was not found.</div></span>\");\n\t\t\t\t}\n\n\t\t\t\t?>\n\t\t\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t\t\t$(function() {\n\t\t\t\t\t\t\t\t\t\t$(window).bind('keydown', function(event) {\n\t\t\t\t\t\t\t\t\t\t\tif (event.ctrlKey || event.metaKey) {\n\t\t\t\t\t\t\t\t\t\t\t\tswitch (String.fromCharCode(event.which).toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#saver\").click();\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t</script>\n\n\t\t\t\t\t\t<div class=\"span9\">\n\n\t\t\t\t\t\t\t<div class=\"well\">\n\n\t\t\t\t\t\t\t\t<h3><input type=\"text\" name=\"fname\" placeholder=\"First Name\" value=\"<?=$person['fname']?>\"><input type=\"text\" name=\"lname\" placeholder=\"Last Name\" value=\"<?=$person['lname']?>\"></h3><button type=\"submit\" id=\"saver\" class=\"btn btn-success pull-right\">Save</button><a href=\"/faculty/<?=$person['slug']?>/\" class=\"btn btn-default pull-right\">Close</a>\n\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<script>\n\t\t\t\t\t\t\t$(function() {\n\t\t\t\t\t\t\t\t$(\"input[name=picture]\").on(\"change\", function() {\n\t\t\t\t\t\t\t\t\t$(\"#picture\").attr(\"src\", $(this).val());\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t</script>\n\n\t\t\t\t\t\t<div class=\"span2\">\n\n\t\t\t\t\t\t\t<div class=\"thumbnail\">\n\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"picture\" placeholder=\"Photo URL\" class=\"input-medium\" value=\"<?=$person['picture']?>\">\n\t\t\t\t\t\t\t\t<img src=\"<?=$person['picture']?>\" alt=\"\" id=\"picture\">\n\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<br />\n\n\n\n\t\t\t\t\t\t<div class=\"span4\">\n\n\t\t\t\t\t\t\t<div class=\"well\">\n\n\t\t\t\t\t\t\t\t<h3>Schedule</h3>\n\t\t\t\t\t\t\t\t<h5><a href=\"<?=$person['website'] ?>\">&nbsp;Main Website</a></h5>\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"website\" placeholder=\"Main URL\" value=\"<?=$person['website']?>\">\n\n\t\t\t\t\t\t\t\t<table class=\"table table-condensed\">\n\n\t\t\t\t\t\t\t\t\t<tr>\n\n\t\t\t\t\t\t\t\t\t\t<th width=\"21%\">Period</th>\n\n\t\t\t\t\t\t\t\t\t\t<th width=\"40%\">A Day</th>\n\n\t\t\t\t\t\t\t\t\t\t<th width=\"39%\">B Day</th>\n\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tfunction perinfo($num) {\n\t\t\t\t\t\t\t\t\t\techo '\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"a'.$num.'\" placeholder=\"A'.$num.'\" class=\"input-small\" value=\"'.htmlspecialchars($person['a'.$num.'']).'\"><br>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"a'.$num.'u\" placeholder=\"A'.$num.' URL\" class=\"input-small\" value=\"'.$person['a'.$num.'u'].'\">\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"b'.$num.'\" placeholder=\"B'.$num.'\" class=\"input-small\" value=\"'.htmlspecialchars($person['b'.$num.'']).'\"><br>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"b'.$num.'u\" placeholder=\"B'.$num.' URL\" class=\"input-small\" value=\"'.$person['b'.$num.'u'].'\">\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>1st</td>\n\t\t\t\t\t\t\t\t\t\t<?=perinfo(1)?>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>2nd</td>\n\t\t\t\t\t\t\t\t\t\t<?=perinfo(2)?>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>4th</td>\n\t\t\t\t\t\t\t\t\t\t<?=perinfo(4)?>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>5th</td>\n\t\t\t\t\t\t\t\t\t\t<?=perinfo(4)?>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"well\">\n\n\t\t\t\t\t\t\t\t<h5>Education</h5>\n\n\t\t\t\t\t\t\t  <textarea name=\"education\" style=\"width:100%;height:200px;\"><?=$person['education']?></textarea>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"well\">\n\n\t\t\t\t\t\t\t\t<h5>Extras</h5>\n\n\t\t\t\t\t\t\t  <textarea name=\"extras\" style=\"width:100%;height:200px;\"><?=$person['extras']?></textarea>\n\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\n\n\n\t\t\t\t\t\t<div class=\"span3\">\n\n\t\t\t\t\t\t\t<div class=\"well\">\n\n\t\t\t\t\t\t\t\t<h5>Contact</h5>\n\n\t\t\t\t\t\t\t\t<ul class=\"nav nav-list\">\n\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"email\" placeholder=\"Email\" value=\"<?=$person['email']?>\">\n\n\t\t\t\t\t\t\t\t\t<li>Room: <input type=\"text\" name=\"room\" class=\"input-small\" value=\"<?=$person['room']?>\"></li>\n\n\t\t\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t\t<!--/row-->\n\t\t\t\t</form>\n\n\n\t\t\t\t<?php include \"../assets/inc/footer.php\" ?>\n\n\n\n\t\t\t</div>\n\t\t\t<!-- /container -->\n\n\n\n\t\t\t<!-- Yummy JavaScrips\n\n    \t================================================== -->\n\n\t\t\t<!-- Placed at the end of the document so the pages load faster -->\n\n\t\t\t<script src=\"/assets/js/jquery.js\"></script>\n\n\t\t\t<script src=\"/assets/js/bootstrap.js\"></script>\n\n\n\n\t</body>\n\n\t</html>"]],"start1":0,"start2":0,"length1":0,"length2":6185}],"length":6185}
{"ts":1534281795,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"\t\t\t\t\t<?=perinfo("],[-1,"4"],[1,"5"],[0,")?>\n\t\t\t\t\t\t\t\t\t</t"]],"start1":4990,"start2":4990,"length1":33,"length2":33}],"length":6185}
{"ts":1534281894,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"\n\t\t\t\t\t$a"],[-1,"3"],[1,"4"],[0," = $_POS"]],"start1":793,"start2":793,"length1":17,"length2":17},{"diffs":[[0,"_POST['a"],[-1,"3"],[1,"4"],[0,"'];\n\t\t\t\t"]],"start1":806,"start2":806,"length1":17,"length2":17},{"diffs":[[0,"\n\t\t\t\t\t$b"],[-1,"3"],[1,"4"],[0," = $_POS"]],"start1":818,"start2":818,"length1":17,"length2":17},{"diffs":[[0,"_POST['b"],[-1,"3"],[1,"4"],[0,"'];\n\t\t\t\t"]],"start1":831,"start2":831,"length1":17,"length2":17},{"diffs":[[0,"T['b4'];\n\t\t\t\t\t$a"],[-1,"4"],[1,"5"],[0," = $_POST['a4'];"]],"start1":835,"start2":835,"length1":33,"length2":33},{"diffs":[[0,"\t$a5 = $_POST['a"],[-1,"4"],[1,"5"],[0,"'];\n\t\t\t\t\t$b4 = $"]],"start1":848,"start2":848,"length1":33,"length2":33},{"diffs":[[0,"T['a5'];\n\t\t\t\t\t$b"],[-1,"4"],[1,"5"],[0," = $_POST['b4'];"]],"start1":860,"start2":860,"length1":33,"length2":33},{"diffs":[[0,"\t$b5 = $_POST['b"],[-1,"4"],[1,"5"],[0,"'];\n\t\t\t\t\t$a1u = "]],"start1":873,"start2":873,"length1":33,"length2":33},{"diffs":[[0,"\n\t\t\t\t\t$a"],[-1,"3"],[1,"4"],[0,"u = $_PO"]],"start1":1001,"start2":1001,"length1":17,"length2":17},{"diffs":[[0,"_POST['a"],[-1,"3"],[1,"4"],[0,"u'];\n\t\t\t"]],"start1":1015,"start2":1015,"length1":17,"length2":17},{"diffs":[[0,"\n\t\t\t\t\t$b"],[-1,"3"],[1,"4"],[0,"u = $_PO"]],"start1":1028,"start2":1028,"length1":17,"length2":17},{"diffs":[[0,"_POST['b"],[-1,"3"],[1,"4"],[0,"u'];\n\t\t\t"]],"start1":1042,"start2":1042,"length1":17,"length2":17},{"diffs":[[0,"['b4u'];\n\t\t\t\t\t$a"],[-1,"4"],[1,"5"],[0,"u = $_POST['a4u'"]],"start1":1047,"start2":1047,"length1":33,"length2":33},{"diffs":[[0,"$a5u = $_POST['a"],[-1,"4"],[1,"5"],[0,"u'];\n\t\t\t\t\t$b4u ="]],"start1":1061,"start2":1061,"length1":33,"length2":33},{"diffs":[[0,"['a5u'];\n\t\t\t\t\t$b"],[-1,"4"],[1,"5"],[0,"u = $_POST['b4u'"]],"start1":1074,"start2":1074,"length1":33,"length2":33},{"diffs":[[0,"$b5u = $_POST['b"],[-1,"4"],[1,"5"],[0,"u'];\n\t\t\t\t\t$educa"]],"start1":1088,"start2":1088,"length1":33,"length2":33},{"diffs":[[0,"?,`a"],[-1,"3"],[1,"4"],[0,"`=?,`b"],[-1,"3"],[1,"4"],[0,"`=?,`a"],[-1,"4"],[1,"5"],[0,"`=?,`b"],[-1,"4"],[1,"5"],[0,"`=?,"]],"start1":1371,"start2":1371,"length1":30,"length2":30},{"diffs":[[0,"?,`a"],[-1,"3"],[1,"4"],[0,"u`=?,`b"],[-1,"3"],[1,"4"],[0,"u`=?,`a"],[-1,"4"],[1,"5"],[0,"u`=?,`b"],[-1,"4"],[1,"5"],[0,"u`=?"]],"start1":1431,"start2":1431,"length1":33,"length2":33}],"length":6185}
{"ts":1534282451,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"nfo($num"],[1,",$person"],[0,") {\n\t\t\t\t"]],"start1":4031,"start2":4031,"length1":16,"length2":24},{"diffs":[[0,"erinfo(1"],[1,",$person"],[0,")?>\n"],[-1,""],[0,"\t\t\t\t\t\t\t\t"]],"start1":4773,"start2":4773,"length1":20,"length2":28},{"diffs":[[0,"erinfo(2"],[1,",$person"],[0,")?>\n\t\t\t\t"]],"start1":4859,"start2":4859,"length1":16,"length2":24},{"diffs":[[0,"erinfo(4"],[1,",$person"],[0,")?>\n\t\t\t\t"]],"start1":4945,"start2":4945,"length1":16,"length2":24},{"diffs":[[0,"\t\t\t<td>5th</td>\n"],[-1,""],[0,"\t\t\t\t\t\t\t\t\t\t<?=per"]],"start1":5001,"start2":5001,"length1":32,"length2":32},{"diffs":[[0,"erinfo(5"],[1,",$person"],[0,")?>\n\t\t\t\t"]],"start1":5031,"start2":5031,"length1":16,"length2":24}],"length":6225}
{"ts":1534282596,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"2,$a"],[-1,"3,$b3,$a4,$b4"],[1,"4,$b4,$a5,$b5"],[0,",$a1"]],"start1":1623,"start2":1623,"length1":21,"length2":21},{"diffs":[[0,"u,$a"],[-1,"3"],[1,"4"],[0,"u,$b"],[-1,"3"],[1,"4"],[0,"u,$a"],[-1,"4"],[1,"5"],[0,"u,$b"],[-1,"4"],[1,"5"],[0,"u,$e"]],"start1":1659,"start2":1659,"length1":24,"length2":24}],"length":6225}
{"ts":1534282630,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"i = "],[-1,"new mysqli(\"localhost\", \"chscyberweb\", $pwwd, \"chs\""],[1,"$manage->db("],[0,");\n\t"]],"start1":445,"start2":445,"length1":59,"length2":20}],"length":6186}
{"ts":1534282684,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"p\";\n"],[-1,"\t\t\t\t$mysqli = $manage->db();\n"],[0,"\t\t\t\t"]],"start1":431,"start2":431,"length1":37,"length2":8}],"length":6157}
{"ts":1534282775,"restoring":false,"user_id":7359,"patch":[{"diffs":[[0,"tion per"],[1,"_"],[0,"info($nu"]],"start1":3954,"start2":3954,"length1":16,"length2":17},{"diffs":[[0,"\t\t\t\t\t\t<?=per"],[1,"_"],[0,"info(1,$pers"]],"start1":4696,"start2":4696,"length1":24,"length2":25},{"diffs":[[0,"fo(1,$person)?>\n"],[-1,""],[0,"\t\t\t\t\t\t\t\t\t</tr>\n\t"]],"start1":4711,"start2":4711,"length1":32,"length2":32},{"diffs":[[0,"\t\t\t\t\t\t<?=per"],[1,"_"],[0,"info(2,$pers"]],"start1":4783,"start2":4783,"length1":24,"length2":25},{"diffs":[[0,"\t\t\t\t\t\t<?=per"],[1,"_"],[0,"info(4,$pers"]],"start1":4870,"start2":4870,"length1":24,"length2":25},{"diffs":[[0,"\t\t\t<td>5th</td>\n"],[-1,""],[0,"\t\t\t\t\t\t\t\t\t\t<?=per"]],"start1":4937,"start2":4937,"length1":32,"length2":32},{"diffs":[[0,"\t\t<?=per"],[1,"_"],[0,"info(5,$"]],"start1":4961,"start2":4961,"length1":16,"length2":17}],"length":6162}
{"ts":1534954381,"restoring":false,"user_id":13636,"patch":[{"diffs":[[0,");\n\t\t\t\t\t"],[1,"//"],[0,"$manage-"]],"start1":1680,"start2":1680,"length1":16,"length2":18}],"length":6164}